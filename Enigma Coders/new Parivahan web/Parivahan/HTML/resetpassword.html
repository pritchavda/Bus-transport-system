<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div class="loginInfo">
        <form action="" method="post" class="loginform">
            <small><span id="error" style="color: red"></span></small>
            <input type="email" id="email" placeholder="Enter Email ID" class="formemail formm">
            <input type="password" id="password" placeholder="Password" class="fomrpassword formm">
        </form>
    </div>
    <div class="loginButton">
        <div class="SignInBtn btnbtn">
            <button class="singbtn" id="sighIn">Sign In</button>
    </div>
</body>
<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.5/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.6.5/firebase-analytics.js";
    import { getDatabase, set, ref, update } from "https://www.gstatic.com/firebasejs/9.6.5/firebase-database.js";
    import { getAuth, createUserWithEmailAndPassword,updatePassword, signInWithEmailAndPassword,sendPasswordResetEmail,onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.6.5/firebase-auth.js";
    // Initialize Firebase
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
  
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyDzU2LsVytDkMXwCidTmO-E4-Xbg62Mdb0",
      authDomain: "parivahan-f7413.firebaseapp.com",
      databaseURL: "https://parivahan-f7413-default-rtdb.firebaseio.com",
      projectId: "parivahan-f7413",
      storageBucket: "parivahan-f7413.appspot.com",
      messagingSenderId: "127872997898",
      appId: "1:127872997898:web:1910d19b13d17210fb9df3",
      measurementId: "G-7VFN151RC8"
    };
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const auth = getAuth();
    const database = getDatabase(app);

    
    //sighUp.addEventListener("click",(event)=>{
    //    var email = document.getElementById('email').value;
    //    var password = document.getElementById('password').value;
  //      
    //    console.log(email,password);
    //    createUserWithEmailAndPassword(auth, email, password)
    //    .then((userCredential) => {
    //        // Signed in 
    //        const user = userCredential.user;
//
    //        set(ref(database, 'Users/'+'Customers/'+ user.uid),{
    //            email: email
    //        })
         //   
    //        alert('userCreated')
    //        // ...
    //    })
    //    .catch((error) => {
    //        const errorCode = error.code;
    //        const errorMessage = error.message;
    //        document.getElementById("error").innerHTML = error.message;
    //        // ..
    //    });
  //  })

   sighIn.addEventListener("click",(event)=>{
       var email = document.getElementById('email').value;
       var password = document.getElementById('password').value;
       console.log(email,password);


       const auth = getAuth();
       sendPasswordResetEmail(auth, email)
         .then(() => {
           // Password reset email sent!
           // ..
           alert("reset emil sent");
         })
         .catch((error) => {
           const errorCode = error.code;
           const errorMessage = error.message;
           console.log("error massage");
           // ..
         });

       // const user = auth.currentUser;
       // const newPassword = getASecureRandomPassword();

        

       


       
  //     signInWithEmailAndPassword(auth, email, password)
  //     .then((userCredential) => {
  //         // Signed in 
  //         const user = userCredential.user;
  //         alert('userSigh in')
  //         // ...
  //     })
  //     .catch((error) => {
  //         const errorCode = error.code;
  //         const errorMessage = error.message;
  //         document.getElementById("error").innerHTML = error.message;
  //         // if (error.message == 'Firebase: Error (auth/user-not-found).') {
  //         //     alert('this is true');
  //         //     document.getElementById("error").innerHTML = 'User Not Found';
  //         // }
  //     });
   })

    const user = auth.currentUser;
    onAuthStateChanged(auth, (user) => {
        if (user) {
            // User is signed in, see docs for a list of available properties
            // https://firebase.google.com/docs/reference/js/firebase.User
            //// location.replace("customerMapActivity.html");
            const uid = user.uid;
            // ...
        } else {
            // User is signed out
            // ...
            // location.replace("index.html");
        }
    });
  </script>
</html>